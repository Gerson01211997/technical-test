# Technical Test Application

Aplicaci√≥n React con TypeScript que implementa autenticaci√≥n, lista virtualizada de 2000 elementos, y arquitectura escalable con patr√≥n Repository.

## üöÄ Caracter√≠sticas Implementadas

- ‚úÖ **Autenticaci√≥n con fake-login** (test@test.com / 1234)
- ‚úÖ **Lista virtualizada** de 2000 elementos con @tanstack/react-virtual
- ‚úÖ **Axios** configurado con interceptores para env√≠o autom√°tico de tokens
- ‚úÖ **Patr√≥n Repository** para gesti√≥n de datos
- ‚úÖ **Protecci√≥n de rutas** con middleware y componentes protegidos
- ‚úÖ **Zustand** para estado global con persistencia
- ‚úÖ **Responsive Design** con Tailwind CSS
- ‚úÖ **Tests** con Jest y React Testing Library
- ‚úÖ **Pre-commit hooks** con Husky, Biome y coverage

## üì¶ Instalaci√≥n y Ejecuci√≥n

```bash
# Instalar dependencias
npm install

# Ejecutar en desarrollo
npm run dev

# Abrir en navegador
http://localhost:3000
```

## üîê Credenciales de Acceso

- **Email:** test@test.com
- **Contrase√±a:** 1234

## üß™ Testing

```bash
# Ejecutar todos los tests
npm test

# Ejecutar tests con coverage (requiere 80%)
npm run test:coverage

# Ejecutar tests en modo watch
npm run test:watch
```

## üé® Linting y Formateo

```bash
# Ejecutar linter
npm run lint

# Formatear c√≥digo
npm run format

# Verificar y aplicar correcciones
npm run check
```

## üèóÔ∏è Arquitectura

### Estructura del Proyecto

```
src/
‚îú‚îÄ‚îÄ app/                    # App Router de Next.js
‚îÇ   ‚îú‚îÄ‚îÄ login/             # P√°gina de login (p√∫blica)
‚îÇ   ‚îú‚îÄ‚îÄ home/              # P√°gina home (protegida)
‚îÇ   ‚îî‚îÄ‚îÄ layout.tsx         # Layout con providers
‚îú‚îÄ‚îÄ components/            # Componentes reutilizables
‚îÇ   ‚îú‚îÄ‚îÄ LoginForm.tsx      # Formulario de login
‚îÇ   ‚îú‚îÄ‚îÄ ProtectedRoute.tsx # HOC para proteger rutas
‚îÇ   ‚îî‚îÄ‚îÄ VirtualizedList.tsx # Lista virtualizada
‚îú‚îÄ‚îÄ contexts/              # Contextos de React
‚îÇ   ‚îî‚îÄ‚îÄ AuthContext.tsx    # Contexto de autenticaci√≥n
‚îú‚îÄ‚îÄ stores/                # Estado global (Zustand)
‚îÇ   ‚îî‚îÄ‚îÄ authStore.ts       # Store de autenticaci√≥n
‚îú‚îÄ‚îÄ services/              # Servicios y l√≥gica de negocio
‚îÇ   ‚îú‚îÄ‚îÄ mockData.ts        # Datos mock (2000 elementos)
‚îÇ   ‚îú‚îÄ‚îÄ hooks/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ useCallbackApi/ # Cliente HTTP con Axios
‚îÇ   ‚îî‚îÄ‚îÄ repository/        # Patr√≥n Repository
‚îÇ       ‚îú‚îÄ‚îÄ hooks/
‚îÇ       ‚îÇ   ‚îî‚îÄ‚îÄ list/      # Hooks para la lista
‚îÇ       ‚îî‚îÄ‚îÄ repositories/
‚îÇ           ‚îî‚îÄ‚îÄ ListRepository/ # Repository de lista
‚îî‚îÄ‚îÄ types/                 # Definiciones de tipos TypeScript
```

### Patr√≥n Repository

El proyecto implementa el patr√≥n Repository siguiendo programaci√≥n funcional:

1. **useCallbackApi**: Cliente Axios configurado con interceptores
2. **ListRepository**: Repository para gesti√≥n de datos de la lista
3. **Custom Hooks**: useGetAllList para consumir datos con React Query

```typescript
// Ejemplo de uso
const { data, isLoading, isError } = useGetAllList();
```

### Sistema de Autenticaci√≥n

#### Arquitectura P√∫blico/Privado

**Rutas P√∫blicas:**
- `/login` - Accesible sin autenticaci√≥n
- `/` - Redirige seg√∫n estado de autenticaci√≥n

**Rutas Privadas:**
- `/home` - Requiere autenticaci√≥n v√°lida

#### Flujo de Autenticaci√≥n

1. Usuario ingresa credenciales en `/login`
2. Validaci√≥n con credenciales espec√≠ficas (test@test.com / 1234)
3. Generaci√≥n de token fake
4. Almacenamiento en Zustand con persistencia en localStorage
5. Redirecci√≥n autom√°tica a `/home`
6. Token incluido autom√°ticamente en todas las requests HTTP via Axios interceptors

#### Protecci√≥n de Rutas

**Nivel 1 - Middleware (Server-side)**
```typescript
// middleware.ts
- Protege rutas antes de renderizar
- Redirige autom√°ticamente seg√∫n estado de autenticaci√≥n
```

**Nivel 2 - ProtectedRoute Component (Client-side)**
```typescript
// ProtectedRoute.tsx
- Verifica autenticaci√≥n en cliente
- Maneja estados de carga
- Redirige si no hay sesi√≥n v√°lida
```

### Gesti√≥n de Estado

**Zustand Store:**
- Estado global ligero y eficiente
- Persistencia autom√°tica en localStorage
- Sin boilerplate innecesario

**React Query:**
- Cache inteligente de datos
- Sincronizaci√≥n autom√°tica
- Estados de loading/error manejados

## üéØ Virtualizaci√≥n de Lista

### ¬øPor qu√© virtualizaci√≥n?

La lista de 2000 elementos est√° virtualizada usando **@tanstack/react-virtual** por las siguientes razones:

#### Ventajas

1. **Rendimiento Optimizado**
   - Solo renderiza elementos visibles en viewport (~10-20 elementos)
   - Reduce renderizados de 2000 a ~20 elementos
   - Mejora significativa en FPS y tiempo de carga

2. **Uso Eficiente de Memoria**
   - Reduce uso de memoria en ~80%
   - No mantiene 2000 elementos en el DOM
   - Mejor para dispositivos con recursos limitados

3. **Escalabilidad**
   - Soporta listas de miles o millones de elementos
   - Performance consistente independiente del tama√±o
   - No degrada con el tiempo

4. **Experiencia de Usuario**
   - Scroll suave y fluido
   - Sin lag o congelamiento
   - Responsive en todos los dispositivos

#### Implementaci√≥n

```typescript
const virtualizer = useVirtualizer({
  count: items.length,
  getScrollElement: () => parentRef.current,
  estimateSize: () => 80, // Altura estimada
  overscan: 5, // Renderiza 5 items extra
});
```

## üîß Configuraci√≥n de Axios

### Interceptores Configurados

**Request Interceptor:**
```typescript
- Obtiene token del localStorage
- Agrega autom√°ticamente header Authorization
- Se aplica a todas las requests
```

**Response Interceptor:**
```typescript
- Maneja errores 401 (token inv√°lido)
- Limpia sesi√≥n autom√°ticamente
- Redirige a login en caso de error de autenticaci√≥n
```

### Uso

```typescript
// Autom√°ticamente incluye el token
const data = await useCallbackApi('/endpoint', {
  method: 'GET',
  params: { page: 1 }
});
```

## üîí Pre-commit Hooks

El proyecto incluye hooks de pre-commit que se ejecutan autom√°ticamente:

1. **Biome Linter**
   - Verifica c√≥digo antes de commit
   - Aplica correcciones autom√°ticas
   - Falla si hay errores que no se pueden auto-corregir

2. **Coverage Tests**
   - Ejecuta tests con coverage
   - Requiere m√≠nimo 80% de cobertura
   - Falla el commit si no se cumple el threshold

### Configuraci√≥n

```json
{
  "lint-staged": {
    "src/**/*.{ts,tsx}": [
      "biome check --apply",
      "npm run test:coverage"
    ]
  }
}
```

## üìä Coverage

El proyecto mantiene un m√≠nimo de **80% de cobertura** en:
- Statements
- Branches
- Functions
- Lines

**Archivos excluidos del coverage:**
- `src/app/**/*` (p√°ginas de Next.js)
- `src/**/*.d.ts` (archivos de definici√≥n de tipos)

## üöÄ Mejoras Propuestas para Backend Efficiency

### 1. Paginaci√≥n Real
**Problema actual:** Cargar 2000 elementos de una vez
**Soluci√≥n:** Implementar paginaci√≥n server-side
```typescript
GET /api/items?page=1&limit=50
```
**Beneficios:**
- Reduce payload de respuesta
- Mejora tiempo de carga inicial
- Reduce uso de memoria en servidor

### 2. Infinite Scroll
**Implementaci√≥n:** Cargar datos bajo demanda
```typescript
- Usar IntersectionObserver
- Cargar siguiente p√°gina al llegar al final
- Mantener solo p√°ginas visibles en memoria
```

### 3. Cache Strategy Mejorada
**Implementaci√≥n:**
```typescript
- Cache con TTL (Time To Live)
- Invalidaci√≥n selectiva por categor√≠as
- Background refresh de datos stale
- Service Workers para cache offline
```

### 4. Compresi√≥n de Datos
**T√©cnicas:**
- Gzip/Brotli en respuestas
- Minificaci√≥n de JSON
- Compresi√≥n de im√°genes

### 5. GraphQL o REST Optimizado
**Ventajas:**
- Solicitar solo campos necesarios
- Reducir over-fetching
- Batching de m√∫ltiples queries

### 6. Server-Side Caching
**Implementaci√≥n:**
- Redis para cache de queries frecuentes
- CDN para datos est√°ticos
- Edge caching para usuarios geogr√°ficamente distribuidos

### 7. Optimistic Updates
**Implementaci√≥n:**
- Actualizar UI inmediatamente
- Sincronizar con servidor en background
- Rollback en caso de error

## üìù Scripts Disponibles

```bash
npm run dev          # Servidor de desarrollo
npm run build        # Build de producci√≥n
npm run start        # Servidor de producci√≥n
npm run lint         # Linter con Biome
npm run format       # Formatear c√≥digo
npm run check        # Verificar y corregir
npm test            # Ejecutar tests
npm run test:coverage # Tests con coverage
npm run test:watch   # Tests en modo watch
```

## üõ†Ô∏è Tecnolog√≠as Utilizadas

- **Next.js 15** - Framework React con App Router
- **TypeScript 5** - Tipado est√°tico
- **Tailwind CSS 4** - Estilos utilitarios
- **Zustand** - Estado global
- **Axios** - Cliente HTTP
- **@tanstack/react-query** - Data fetching y cache
- **@tanstack/react-virtual** - Virtualizaci√≥n de listas
- **Jest** - Testing framework
- **React Testing Library** - Testing de componentes
- **Biome** - Linter y formatter
- **Husky** - Git hooks
- **lint-staged** - Pre-commit validation

## üì± Responsive Design

La aplicaci√≥n es completamente responsive:
- **Mobile First:** Dise√±o optimizado para m√≥viles
- **Tablet:** Layout adaptativo
- **Desktop:** Experiencia completa

## üîê Seguridad

- Middleware para protecci√≥n de rutas server-side
- Verificaci√≥n de autenticaci√≥n client-side
- Token management seguro
- Limpieza autom√°tica de sesi√≥n en errores 401

## üìà Escalabilidad

### Arquitectura Modular
- Separaci√≥n clara de responsabilidades
- Patr√≥n Repository para abstracci√≥n de datos
- Componentes reutilizables
- Hooks personalizados

### Extensibilidad Futura
F√°cil agregar:
- Nuevos m√≥dulos p√∫blicos (ej: recuperar contrase√±a)
- Nuevos m√≥dulos privados (ej: perfil de usuario)
- Nuevas fuentes de datos en Repository
- Nuevas funcionalidades sin romper c√≥digo existente

## üë®‚Äçüíª Desarrollo

### Convenciones de C√≥digo
- Programaci√≥n funcional (no OOP)
- Componentes funcionales con hooks
- TypeScript estricto
- Naming conventions consistentes

### Git Workflow
1. Los cambios pasan por pre-commit hooks
2. Biome verifica el c√≥digo
3. Tests con 80% coverage deben pasar
4. Solo entonces se permite el commit

---

**Desarrollado como parte de una prueba t√©cnica** üöÄ

## üìû Contacto

Para preguntas o mejoras, por favor abre un issue en el repositorio.